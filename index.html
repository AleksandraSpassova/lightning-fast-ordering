<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=1980" />
    <title>Lightning Fast Ordering</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="js/languageManager.js"></script>
    <script>
      // Check if user is logged in
      window.onload = function() {
        const userEmail = localStorage.getItem('userEmail');
        if (!userEmail) {
          window.location.href = 'login.html';
        }
      }
    </script>
  </head>
  <body>
    <div class="nav-title-bar">
      <h5 data-i18n="appTitle">Lightning Fast Ordering</h5>
    </div>

    <div class="main-navbar">
      <div class="navbar-container">
        <div class="logo">
          <img src="images/navlogo.svg" height="44px" width="280px" />
        </div>

        <div></div>
        <div></div>
        <div></div>

        <div class="language-selector">
          <img src="images/lang.svg" />
          <div class="language-dropdown">
            <div>EN</div>
            <div>DE</div>
            <div>ES</div>
            <div>NL</div>
          </div>
        </div>

        <div></div>

        <div>
          <button class="logout-button" onclick="handleLogout()" data-i18n="nav.logout">LOG OUT →</button>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="price-list" id="priceList">
        <div class="tite-table" id="titletable"><h1 data-i18n="priceList.title">Price List</h1></div>
        <div class="search-filter-row">
          <div class="search-bar">
            <input type="text" data-i18n-placeholder="priceList.searchPlaceholder" placeholder="Search product" id="search-input" />
            <span class="search-icon"><img src="images/search.svg" /></span>
          </div>
          <div class="filter-dropdown">
            <button class="filter-button">
              <span data-i18n="priceList.stockAvailability">Stock Availability</span>
              <span class="arrow">
                <img src="images/dropdownfilter.svg" />
              </span>
            </button>
            <div class="dropdown-menu">
              <div data-i18n="priceList.directlyAvailable">Directly Available</div>
            </div>
          </div>
          <div class="filter-dropdowntwo">
            <button class="filter-buttontwo">
              <span data-i18n="priceList.category">Category</span>
              <span class="arrow">
                <img src="images/dropdownfilter.svg" />
              </span>
            </button>
            <div class="dropdown-menutwo">
              <div class="category-option" data-i18n="priceList.categories.meatSeafood">Meat & Seafood</div>
              <div class="category-option" data-i18n="priceList.categories.dairyEggs">Dairy & Eggs</div>
              <div class="category-option" data-i18n="priceList.categories.groceries">Groceries</div>
              <div class="category-option" data-i18n="priceList.categories.confectionery">Confectionery</div>
              <div class="category-option" data-i18n="priceList.categories.beverages">Beverages</div>
              <div class="category-option" data-i18n="priceList.categories.beerWines">Beer & Wines</div>
              <div class="category-option" data-i18n="priceList.categories.liquors">Liquors</div>
              <div class="category-option" data-i18n="priceList.categories.nonFood">Non-Food</div>
            </div>
          </div>
        </div>

        <table id="products-table">
          <thead>
            <tr>
              <th data-i18n="table.item">Item</th>
              <th data-i18n="table.price">Price</th>
              <th data-i18n="table.stock">Stock</th>
              <th data-i18n="table.origin">Origin</th>
              <th data-i18n="table.category">Category</th>
              <th data-i18n="table.qty">Qty</th>
              <th data-i18n="table.packaging">Packaging</th>
              <th data-i18n="table.pricePerPackaging">Price/Packaging</th>
              <th data-i18n="table.pallet">Pallet</th>
              <th data-i18n="table.volumeWeight">Volume/Weight</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="order-summary hidden" id="orderSummary">
        <h1 data-i18n="orderSummary.title">Order Details</h1>
        <table>
          <thead>
            <tr>
              <th class="left-align" data-i18n="table.item">Item</th>
              <th class="center-align" data-i18n="table.price">Price</th>
              <th class="center-align" data-i18n="table.qty">Qty</th>
              <th class="center-align" data-i18n="table.price">Total</th>
              <th class="center-align" data-i18n="table.volumeWeight">Volume/Weight</th>
            </tr>
          </thead>
          <tbody id="orderItems"></tbody>
          <tfoot>
            <tr class="summary-row">
              <td colspan="3">
                <strong data-i18n="orderSummary.subtotal">Subtotal</strong>
              </td>
              <td id="subtotal">€0.00</td>
              <td></td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
    <script src="script.js"></script>
    <script>
      function handleLogout() {
        localStorage.removeItem('userEmail');
        window.location.href = 'login.html';
      }
    </script>
  </body>

  <script>
    document
      .querySelector(".filter-button")
      .addEventListener("click", function () {
        document.querySelector(".dropdown-menu").classList.toggle("show");
      });

    window.addEventListener("click", function (e) {
      if (!document.querySelector(".filter-dropdown").contains(e.target)) {
        document.querySelector(".dropdown-menu").classList.remove("show");
      }
    });
  </script>

  <script>
    document
      .querySelector(".filter-buttontwo")
      .addEventListener("click", function () {
        document.querySelector(".dropdown-menutwo").classList.toggle("show");
      });

    window.addEventListener("click", function (e) {
      if (!document.querySelector(".filter-dropdowntwo").contains(e.target)) {
        document.querySelector(".dropdown-menutwo").classList.remove("show");
      }
    });
  </script>
</html>
